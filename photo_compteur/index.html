<!DOCTYPE html>
<html>
<body>

<h1>Ceci est la page relève dans Tout sur mon eau version desktop</h1>
<p>Relève Compteur...</p>
<script>    
            const params = new Proxy(new URLSearchParams(window.location.search), {
            get: (searchParams, prop) => searchParams.get(prop),
            });
            var campaign = params.campaign;
            var reference = params.reference;
            var day = params.day;
            var month = params.month;
            var year = params.year;
            var email = params.email;
            console.log(email);
            localStorage.setItem("urlandroid", "com.suez.tsme://photo_compteur?campaign="+campaign+"&reference="+reference+"&day="+day+"&month="+month+"&year="+year+"&email="+email+"#Intent;scheme=https;end");
            localStorage.setItem("urlios", "com.suez.tsme://photo_compteur?campaign="+campaign+"&reference="+reference+"&day="+day+"&month="+month+"&year="+year+"&email="+email);
            var urlToIos = "com.suez.tsme://photo_compteur?campaign="+campaign+"&reference="+reference+"&day="+day+"&month="+month+"&year="+year+"&email="+email;
            function isIos() {
                if (typeof window === `undefined` || typeof navigator === `undefined`) return false;

                return /iPhone|iPad|iPod/i.test(navigator.userAgent || navigator.vendor || (window.opera && opera.toString() === `[object Opera]`));
            };

            function openAMA() {
                //Android
                if (navigator.userAgent.match(/Android/i)) {
                    const url = localStorage.getItem("urlandroid");
                    console.log("urlAndroid" + url);
                    //var result = window.confirm("confirm"+"intent://abdelalitahiri.com/upload_counter_by_ama/photo_compteur/"+campaign+"/"+reference+"/"+day+"/"+month+"/"+year+"/"+email+"#Intent;scheme=https;package=com.suez.tsme;end");
                    //if (result) {
                        window.location.replace(url);
                    //}
                }

                //IOS
                if (isIos) {
                    const urlIos = localStorage.getItem("urlios");
                    // alert("ceci est ios"+ urlIos);
                    // console.log("iphoneUrl"+ urlIos);
                    const isExecuted = confirm("Are you sure to execute this action?");
                    if (isExecuted) {
                        windows.location.assign("com.suez.tsme://photo_compteur?campaign=CNV_P&reference=983013029751&day=02&month=06&year=2023&email=test@yopmail.fr");
                    }
                   
                   
                }
            }

            openAMA();
</script>
</body>
</html>
